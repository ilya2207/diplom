"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[229],{3303:function(e,n,t){t.r(n),t.d(n,{default:function(){return se}});var a=t(2791),i=t(8735),r=t(3822),l=t.p+"static/media/detail.7d3ce82f8153e1e5ade8.png",s=t(5861),o=t(885),c=t(7757),d=t.n(c),u=t(419);var x=t(6478),f=t(184),m=function(){var e=(0,a.useState)(""),n=(0,o.Z)(e,2),t=n[0],r=n[1],l=function(e,n){var t=(0,a.useState)(e),i=(0,o.Z)(t,2),r=i[0],l=i[1];return(0,a.useEffect)((function(){var t=setTimeout((function(){l(e)}),n);return function(){clearTimeout(t)}}),[e]),r}(t,350);return(0,a.useEffect)((function(){var e=function(){var e=(0,s.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Z.get("/detail?search=".concat(l));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[l]),(0,f.jsxs)(i.xu,{children:[(0,f.jsx)(i.xv,{fontSize:"xl",children:"\u041f\u043e\u0438\u0441\u043a \u0437\u0430\u043a\u0430\u0437\u0430"}),(0,f.jsx)(u.BZ,{className:"mt-1",children:(0,f.jsx)(u.II,{value:t,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0430\u0437\u0430",onChange:function(e){return r(e.target.value)}})})]})},p=t(9113),h=t(3209),v=t(7231),g=t(5971),j=t(9611),b=t(4562),w=t(5223);function y(){return y=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},y.apply(this,arguments)}function N(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}var C=["onChange","defaultIndex","index","allowMultiple","allowToggle"],k=["isDisabled","isFocusable","id"],I=(0,b.n)(),E=I[0],_=(I[1],I[2]),P=I[3];function M(e){var n=e.onChange,t=e.defaultIndex,i=e.index,r=e.allowMultiple,l=e.allowToggle,s=N(e,C);!function(e){var n=e.index||e.defaultIndex,t=!(0,g.o8)(n)&&!(0,g.kJ)(n)&&e.allowMultiple;(0,g.ZK)({condition:!!t,message:"If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: "+typeof n+","})}(e),function(e){(0,g.ZK)({condition:!(!e.allowMultiple||!e.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}(e);var o=_(),c=(0,a.useState)(-1),d=c[0],u=c[1];(0,w.zq)((function(){u(-1)}));var x=(0,w.Tx)({value:i,defaultValue:function(){return r?null!=t?t:[]:null!=t?t:-1},onChange:n}),f=x[0],m=x[1];return{index:f,setIndex:m,htmlProps:s,getAccordionItemProps:function(e){var n=!1;null!==e&&(n=(0,g.kJ)(f)?f.includes(e):f===e);return{isOpen:n,onChange:function(n){if(null!==e)if(r&&(0,g.kJ)(f)){var t=n?(0,g.jX)(f,e):(0,g.cl)(f,e);m(t)}else n?m(e):l&&m(-1)}}},focusedIndex:d,setFocusedIndex:u,descendants:o}}var O=(0,j.kr)({name:"AccordionContext",errorMessage:"useAccordionContext: `context` is undefined. Seems you forgot to wrap the accordion components in `<Accordion />`"}),A=O[0],Z=O[1];function H(e){var n=e.isDisabled,t=e.isFocusable,i=e.id,r=N(e,k),l=Z(),s=l.getAccordionItemProps,o=l.setFocusedIndex,c=(0,a.useRef)(null),d=(0,w.ZS)(i,"accordion-button","accordion-panel"),u=d[0],x=d[1];!function(e){(0,g.ZK)({condition:!(!e.isFocusable||e.isDisabled),message:"Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.\n    "})}(e);var f=P({disabled:n&&!t}),m=f.register,p=f.index,h=f.descendants,v=s(-1===p?null:p),b=v.isOpen,C=v.onChange;!function(e){(0,g.ZK)({condition:e.isOpen&&!!e.isDisabled,message:"Cannot open a disabled accordion item"})}({isOpen:b,isDisabled:n});var I=(0,a.useCallback)((function(){null==C||C(!b),o(p)}),[p,o,b,C]),E=(0,a.useCallback)((function(e){var n={ArrowDown:function(){var e=h.nextEnabled(p);e&&(0,g.T_)(e.node)},ArrowUp:function(){var e=h.prevEnabled(p);e&&(0,g.T_)(e.node)},Home:function(){var e=h.firstEnabled();e&&(0,g.T_)(e.node)},End:function(){var e=h.lastEnabled();e&&(0,g.T_)(e.node)}}[(0,g.uh)(e)];n&&(e.preventDefault(),n(e))}),[h,p]),_=(0,a.useCallback)((function(){o(p)}),[o,p]),M=(0,a.useCallback)((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),y({},e,{type:"button",ref:(0,j.lq)(m,c,t),id:u,disabled:!!n,"aria-expanded":!!b,"aria-controls":x,onClick:(0,g.v0)(e.onClick,I),onFocus:(0,g.v0)(e.onFocus,_),onKeyDown:(0,g.v0)(e.onKeyDown,E)})}),[u,n,b,I,_,E,x,m]),O=(0,a.useCallback)((function(e,n){return void 0===e&&(e={}),void 0===n&&(n=null),y({},e,{ref:n,role:"region",id:x,"aria-labelledby":u,hidden:!b})}),[u,b,x]);return{isOpen:b,isDisabled:n,isFocusable:t,onOpen:function(){null==C||C(!0)},onClose:function(){null==C||C(!1)},getButtonProps:M,getPanelProps:O,htmlProps:r}}var T=["children","reduceMotion"],D=["htmlProps","descendants"],S=["htmlProps"],K=(0,h.Gp)((function(e,n){var t=e.children,i=e.reduceMotion,r=N(e,T),l=(0,h.jC)("Accordion",r),s=M((0,h.Lr)(r)),o=s.htmlProps,c=s.descendants,d=N(s,D),u=a.useMemo((function(){return y({},d,{reduceMotion:!!i})}),[d,i]);return a.createElement(E,{value:c},a.createElement(A,{value:u},a.createElement(h.Fo,{value:l},a.createElement(h.m$.div,y({ref:n},o,{className:(0,g.cx)("chakra-accordion",r.className),__css:l.root}),t))))}));g.Ts&&(K.displayName="Accordion");var z=(0,j.kr)({name:"AccordionItemContext",errorMessage:"useAccordionItemContext: `context` is undefined. Seems you forgot to wrap the accordion item parts in `<AccordionItem />` "}),F=z[0],q=z[1],B=(0,h.Gp)((function(e,n){var t=e.children,i=e.className,r=H(e),l=r.htmlProps,s=N(r,S),o=y({},(0,h.yK)().container,{overflowAnchor:"none"}),c=a.useMemo((function(){return s}),[s]);return a.createElement(F,{value:c},a.createElement(h.m$.div,y({ref:n},l,{className:(0,g.cx)("chakra-accordion__item",i),__css:o}),(0,g.Pu)(t,{isExpanded:!!s.isOpen,isDisabled:!!s.isDisabled})))}));g.Ts&&(B.displayName="AccordionItem");var $=(0,h.Gp)((function(e,n){var t=(0,q().getButtonProps)(e,n),i=y({display:"flex",alignItems:"center",width:"100%",outline:0},(0,h.yK)().button);return a.createElement(h.m$.button,y({},t,{className:(0,g.cx)("chakra-accordion__button",e.className),__css:i}))}));g.Ts&&($.displayName="AccordionButton");var R=(0,h.Gp)((function(e,n){var t=Z().reduceMotion,i=q(),r=i.getPanelProps,l=i.isOpen,s=r(e,n),o=(0,g.cx)("chakra-accordion__panel",e.className),c=(0,h.yK)();t||delete s.hidden;var d=a.createElement(h.m$.div,y({},s,{__css:c.panel,className:o}));return t?d:a.createElement(v.UO,{in:l},d)}));g.Ts&&(R.displayName="AccordionPanel");var U=function(e){var n=q(),t=n.isOpen,i=n.isDisabled,r=Z().reduceMotion,l=(0,g.cx)("chakra-accordion__icon",e.className),s=y({opacity:i?.4:1,transform:t?"rotate(-180deg)":void 0,transition:r?void 0:"transform 0.2s",transformOrigin:"center"},(0,h.yK)().icon);return a.createElement(p.JO,y({viewBox:"0 0 24 24","aria-hidden":!0,className:l,__css:s},e),a.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}))};g.Ts&&(U.displayName="AccordionIcon");var G=t(1399),J=t(5277),L=t(6353),W=t(6579),Y=function(e){var n=e.title,t=e.isParent,r=void 0!==t&&t,l=e.isEditModal,s=void 0!==l&&l,c=e.id,d=e.parentCategoryId,x=e.item,m=e.saveHandler,p=e.deleteHandler,h=e.editHandlerModal,v=(0,a.useState)(!1),g=(0,o.Z)(v,2),j=g[0],b=g[1],w=(0,a.useRef)(!1),y=(0,a.useState)(n),N=(0,o.Z)(y,2),C=N[0],k=N[1];(0,a.useEffect)((function(){""===n&&(b(!0),w.current=!0)}),[]);var I=function(e){if(r&&e.stopPropagation(),c)return p(c)},E=function(e){r&&e.stopPropagation(),""!==C&&b(!j)},_=function(e){if(r&&e.stopPropagation(),""!==C)return b(!j),w.current?r?(m(null,{title:C}),w.current=!1):m(null,{title:C,parentCategoryId:d}):-1!==c?m(c,{title:C}):void 0};return r?(0,f.jsxs)($,{justifyContent:"space-between",cursor:"pointer",as:"div",children:[j&&(0,f.jsx)(u.II,{onKeyDown:function(e){return e.stopPropagation()},required:!0,className:"max-w-sm",value:C,onChange:function(e){return k(e.target.value)},onClick:function(e){return e.stopPropagation()}}),!j&&(0,f.jsx)(i.xv,{className:"py-2",children:C}),(0,f.jsxs)(i.xu,{children:[!j&&(0,f.jsx)("i",{className:"cursor-pointer text-chakra-blue-500 fa-solid fa-pen p-1 ",onClick:E}),j&&(0,f.jsx)("i",{className:"fa-solid fa-check p-1 text-chakra-green-400 ml-4",style:{cursor:""===C?"not-allowed":"pointer"},onClick:_}),(0,f.jsx)("i",{className:"cursor-pointer text-chakra-red-500 fa-solid fa-trash-can p-1 ml-4",onClick:I}),(0,f.jsx)(U,{className:"ml-2"})]})]}):(0,f.jsxs)(i.xu,{className:"p-3 flex justify-between items-center",children:[j&&(0,f.jsx)(u.II,{className:"max-w-sm",value:C,onChange:function(e){return k(e.target.value)}}),!j&&(0,f.jsx)(i.xv,{children:s?n:C}),(0,f.jsxs)(i.xu,{className:"flex gap-4",children:[!j&&(0,f.jsx)("i",{className:"cursor-pointer text-chakra-blue-500 fa-solid fa-pen p-1 ",onClick:s?h(x):E}),j&&(0,f.jsx)("i",{className:"fa-solid fa-check p-1 text-chakra-green-400 ml-4",style:{cursor:""===C?"not-allowed":"pointer"},onClick:_}),(0,f.jsx)("i",{className:"cursor-pointer text-chakra-red-500 fa-solid fa-trash-can p-1",onClick:I})]})]})},Q=function(e){var n,t,a=e.item,r=e.saveHandler,l=e.deleteHandler,s=e.addChildCategoryHandler;return(0,f.jsxs)(B,{children:[(0,f.jsx)(Y,{id:null!==(n=a.id)&&void 0!==n?n:-1,saveHandler:r,isParent:!0,title:a.title,parentCategoryId:a.id,deleteHandler:l}),(0,f.jsxs)(R,{children:[!(null===a||void 0===a||null===(t=a.childCategories)||void 0===t||!t.length)&&a.childCategories.map((function(e,n){var t;return(0,f.jsx)(Y,{deleteHandler:l,saveHandler:r,id:null!==(t=e.id)&&void 0!==t?t:-1,title:e.title,parentCategoryId:a.id},"".concat(e.id,"_").concat(n))})),(0,f.jsx)(i.xu,{textAlign:"right",children:(0,f.jsx)(G.zx,{color:"gray.600",className:"mr-4",variant:"ghost",onClick:function(){return s(a.id)},disabled:!a.title,children:(0,f.jsx)("i",{className:"fa-solid fa-plus"})})})]})]})},V=function(){var e=(0,W.C)((function(e){return e.category})),n=e.items,t=(0,W.T)();(0,a.useEffect)((function(){0===e.items.length&&t((0,J.Rk)())}),[]);var r=function(e){t((0,L.cq)(e))},l=function(e,n){return t(e?(0,J.hk)({body:n,id:e}):(0,J.l1)(n))},s=function(e){return t(e>0?(0,J.KU)(e):(0,L.uN)(e))};return(0,f.jsxs)(i.xu,{children:[(0,f.jsx)(i.xu,{className:"flex justify-between items-center",children:(0,f.jsx)(i.xv,{fontSize:"xl",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439"})}),(0,f.jsx)(K,{className:"mt-5",allowMultiple:!0,children:!!n.length&&n.map((function(e,n){return(0,f.jsx)(Q,{item:e,saveHandler:l,deleteHandler:s,addChildCategoryHandler:r},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(n))}))}),(0,f.jsx)(i.xu,{className:"text-right p-4",children:(0,f.jsx)(G.zx,{onClick:function(){t((0,L.cq)())},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})},X=t(4942),ee=t(1413),ne=t(4732),te=t(5033),ae=t(8581),ie={title:"",model:"",newImg:null},re=function(){var e=(0,w.qY)(),n=e.isOpen,t=e.onOpen,r=e.onClose,l=(0,W.C)((function(e){return e.model})).items,c=(0,W.T)(),x=(0,a.useState)(ie),m=(0,o.Z)(x,2),p=m[0],h=m[1];(0,a.useEffect)((function(){0===l.length&&c((0,te.rq)())}),[]);var v=function(e,n){"newImg"===e&&n[0]&&(n=URL.createObjectURL(n[0])),h((function(t){return(0,ee.Z)((0,ee.Z)({},t),{},(0,X.Z)({},e,n))}))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,n=arguments.length>1?arguments[1]:void 0;return function(){h(n?(0,ee.Z)((0,ee.Z)({},e),{},{brandId:n}):e),t()}},j=function(){r(),h(ie)},b=function(){var e=arguments.length>1?arguments[1]:void 0;c((0,te.mS)(e))},y=function(e,n){c((0,te.E$)({id:e,body:n}))},N=function(){var e=(0,s.Z)(d().mark((function e(){var n,t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new FormData,!p.newImg){e.next=6;break}return e.next=4,fetch(p.newImg).then((function(e){return e.blob()}));case 4:t=e.sent,n.append("img",t);case 6:n.append("title",null===p||void 0===p?void 0:p.title),n.append("model",null===p||void 0===p?void 0:p.model),n.append("brandId",null===p||void 0===p?void 0:p.brandId),null!==p&&void 0!==p&&p.id?c((0,te.E$)({id:p.id,body:n})):c((0,te.mS)(n)),j();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e){c((0,te.$s)(e))};return(0,f.jsxs)(i.xu,{children:[(0,f.jsx)(i.xu,{className:"flex items-center justify-between",children:(0,f.jsx)(i.xv,{fontSize:"xl",children:"\u041c\u0430\u0440\u043a\u0438 \u043c\u0430\u0448\u0438\u043d"})}),(0,f.jsx)(K,{className:"mt-5",allowMultiple:!0,children:l&&l.map((function(e,n){var t;return(0,f.jsxs)(B,{children:[(0,f.jsx)(Y,{deleteHandler:C,id:e.id,saveHandler:e.id<0?b:y,title:e.title,isParent:!0}),(0,f.jsxs)(R,{children:[!(null===e||void 0===e||null===(t=e.brandModels)||void 0===t||!t.length)&&e.brandModels.map((function(n,t){var a;return(0,f.jsx)(Y,{item:n,deleteHandler:C,saveHandler:b,id:null!==(a=n.id)&&void 0!==a?a:-1,title:n.title,parentCategoryId:e.id,editHandlerModal:g,isEditModal:!0},"".concat(n.id,"_").concat(t))})),(0,f.jsx)(i.xu,{textAlign:"right",children:(0,f.jsx)(G.zx,{color:"gray.600",className:"mr-4",variant:"ghost",onClick:g(void 0,e.id),disabled:!e.title,children:(0,f.jsx)("i",{className:"fa-solid fa-plus"})})})]})]},"".concat(e.id,"_").concat(n))}))}),(0,f.jsx)(i.xu,{className:"text-right p-4",children:(0,f.jsx)(G.zx,{onClick:function(){return c((0,ae.Y2)())},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})}),(0,f.jsxs)(ne.u_,{isOpen:n,onClose:j,isCentered:!0,children:[(0,f.jsx)(ne.ZA,{}),(0,f.jsxs)(ne.hz,{children:[(0,f.jsx)(ne.xB,{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c"}),(0,f.jsx)(ne.ol,{}),(0,f.jsxs)(ne.fe,{children:[(0,f.jsx)(i.xv,{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),(0,f.jsx)(u.II,{value:p.title,onChange:function(e){return v("title",e.target.value)}}),(0,f.jsx)(i.xv,{children:"\u041c\u043e\u0434\u0435\u043b\u044c"}),(0,f.jsx)(u.II,{className:"mt-2",placeholder:"\u041c\u043e\u0434\u0435\u043b\u044c",value:p.model,onChange:function(e){return v("model",e.target.value)}}),(0,f.jsxs)(i.xu,{children:[(0,f.jsx)(i.xv,{className:"mt-2",children:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),(0,f.jsx)("label",{className:"cursor-pointer mt-3 p-4 flex justify-center items-center border-2 border-dashed",htmlFor:"uploadFile",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),(0,f.jsx)("input",{className:"overflow-hidden w-0 h-0 opacity-0 absolute",type:"file",name:"uploadFile",id:"uploadFile",onChange:function(e){var n;return v("newImg",null!==(n=e.target.files)&&void 0!==n?n:"")}})]}),(0,f.jsx)(i.xu,{className:"mt-2 flex justify-center",children:(0,f.jsx)("img",{className:"max-w-full",src:p.newImg?p.newImg:p.img?p.img:"",alt:""})})]}),(0,f.jsxs)(ne.mz,{children:[(0,f.jsx)(G.zx,{variant:"ghost",mr:3,onClick:j,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,f.jsx)(G.zx,{colorScheme:"blue",onClick:N,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})]})]})]})},le=function(){return(0,f.jsx)(i.xu,{children:(0,f.jsx)(i.xv,{fontSize:"xl",children:"\u0414\u0435\u0442\u0430\u043b\u0438"})})},se=function(){return(0,f.jsxs)(i.W2,{maxW:"container.xl",children:[(0,f.jsx)(i.xv,{className:"sticky top-36 left-4",fontSize:"1xl",fontWeight:"bold",children:"\u0410\u0434\u043c\u0438\u043d-\u043f\u0430\u043d\u0435\u043b\u044c"}),(0,f.jsx)(r.mQ,{children:(0,f.jsxs)(i.kC,{className:"mt-4 w-full",justifyContent:"space-between",children:[(0,f.jsx)(i.xu,{className:"w-full max-w-xs sticky top-44 left-4",borderWidth:"1px",borderRadius:"lg",flexGrow:0,height:"max-content",children:(0,f.jsxs)(r.td,{flexDirection:"column",borderBottom:"none",children:[(0,f.jsxs)(r.OK,{className:"py-3",children:[(0,f.jsx)("i",{className:"fa-solid fa-clipboard-list mr-2"}),"\u0417\u0430\u043a\u0430\u0437\u044b"]}),(0,f.jsxs)(r.OK,{className:"py-3",children:[(0,f.jsx)("i",{className:"fa-solid fa-list mr-2"}),"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"]}),(0,f.jsxs)(r.OK,{className:"py-3",children:[(0,f.jsx)("i",{className:"fa-solid fa-car mr-2"}),"\u041c\u043e\u0434\u0435\u043b\u0438"]}),(0,f.jsxs)(r.OK,{className:"py-3",children:[(0,f.jsx)("img",{className:"w-4 h-4 mr-2",src:l,alt:""}),"\u0414\u0435\u0442\u0430\u043b\u0438"]})]})}),(0,f.jsx)(i.xu,{className:"flex-auto ml-7",children:(0,f.jsxs)(r.nP,{children:[(0,f.jsx)(r.x4,{className:"p-0",children:(0,f.jsx)(m,{})}),(0,f.jsx)(r.x4,{className:"p-0",children:(0,f.jsx)(V,{})}),(0,f.jsx)(r.x4,{className:"p-0",children:(0,f.jsx)(re,{})}),(0,f.jsx)(r.x4,{className:"p-0",children:(0,f.jsx)(le,{})})]})})]})})]})}}}]);
//# sourceMappingURL=229.bc552c4f.chunk.js.map
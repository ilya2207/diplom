{"version":3,"file":"static/js/241.151b1927.chunk.js","mappings":"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","sources":["constants/index.ts","store/basket/basket.selector.ts","pages/Basket/BasketCreateOrder.tsx","pages/Basket/BasketItem.tsx","pages/Basket/Basket.tsx"],"sourcesContent":["export enum BreadCrumbsTitles {\r\n  MAIN = 'Главная',\r\n  MODEL = 'Модель авто',\r\n  CATEGORY = 'Категория запчастей',\r\n  LIST = 'Список запчастей',\r\n}\r\n\r\nexport const DEFAULT_DETAIL_IMG = '/images/detail/default.jpg'\r\nexport const DEFAULT_MODEL_IMG = '/images/model/default.jpg'\r\n","import { createDraftSafeSelector } from '@reduxjs/toolkit'\r\nimport { RootState } from 'store/store'\r\n\r\nconst basketState = (state: RootState) => state.basket\r\n\r\nexport const getBasketTotalAmount = createDraftSafeSelector(basketState, ({ items }) => {\r\n  let res = 0\r\n  items.forEach((item) => {\r\n    res += (item.detail?.price ?? 0) * item.amount\r\n  })\r\n  return res\r\n})\r\n","import { Box, Button } from '@chakra-ui/react'\r\nimport React, { useState } from 'react'\r\n\r\ninterface Props {\r\n  disabled: boolean\r\n  createOrder: () => Promise<void>\r\n}\r\nconst BasketCreateOrder: React.FC<Props> = ({ createOrder, disabled }) => {\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const clickHandler = async () => {\r\n    setLoading(true)\r\n    await createOrder()\r\n    setLoading(false)\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      <Button\r\n        className=\"w-full mt-6\"\r\n        disabled={disabled}\r\n        colorScheme={'blue'}\r\n        isLoading={loading}\r\n        onClick={clickHandler}\r\n      >\r\n        Оформить заказ\r\n      </Button>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default BasketCreateOrder\r\n","import { MinusIcon, AddIcon } from '@chakra-ui/icons'\r\nimport { Box, Button, Text } from '@chakra-ui/react'\r\nimport { DEFAULT_DETAIL_IMG } from 'constants/'\r\nimport React, { useState } from 'react'\r\nimport { IBasketItem } from 'types/basket.types'\r\n\r\ninterface IProps {\r\n  item: IBasketItem\r\n  changeAmountHandler: (id: number, amount: number) => void\r\n  deleteBasketItemHandler: (id: number) => Promise<void>\r\n}\r\n\r\nconst BasketItem: React.FC<IProps> = ({ changeAmountHandler, deleteBasketItemHandler, item }) => {\r\n  const [loading, setLoading] = useState(false)\r\n\r\n  const clickHandler = async () => {\r\n    setLoading(true)\r\n    await deleteBasketItemHandler(item.id ?? 0)\r\n    setLoading(false)\r\n  }\r\n  return (\r\n    <Box className=\"p-2 mt-2\">\r\n      <Box className=\"flex items-start\">\r\n        <Box>\r\n          <img\r\n            className=\"w-full\"\r\n            style={{ maxWidth: '150px' }}\r\n            src={item.detail?.img ?? DEFAULT_DETAIL_IMG}\r\n            alt=\"\"\r\n          />\r\n        </Box>\r\n        <Box className=\"w-full ml-6\">\r\n          <Box className=\"flex justify-between items-center w-full\">\r\n            <Box>\r\n              <Text fontSize={'md'}>{item.detail?.title}</Text>\r\n              <Text fontSize={'md'}>{item.detail?.shortDescription}</Text>\r\n            </Box>\r\n            <Box>\r\n              <Text fontSize={'lg'} fontWeight={'medium'}>\r\n                {item.detail?.price}&#8381;\r\n              </Text>\r\n            </Box>\r\n          </Box>\r\n          <Box className=\"mt-3 flex justify-between items-center\">\r\n            <Box className=\"rounded-xl items-center inline-flex px-4 gap-2\">\r\n              <Button\r\n                variant={'ghost'}\r\n                disabled={item.amount === 1}\r\n                onClick={() => changeAmountHandler(item.id ?? 0, item.amount - 1)}\r\n              >\r\n                <MinusIcon className=\"cursor-pointer\" />\r\n              </Button>\r\n              <Text className=\"select-none\" fontWeight={'medium'} fontSize={'xl'}>\r\n                {item.amount}\r\n              </Text>\r\n              <Button\r\n                variant={'ghost'}\r\n                onClick={() => changeAmountHandler(item.id ?? 0, item.amount + 1)}\r\n              >\r\n                <AddIcon className=\"cursor-pointer\" />\r\n              </Button>\r\n            </Box>\r\n            <Button onClick={clickHandler} colorScheme={'red'} isLoading={loading}>\r\n              Удалить\r\n            </Button>\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  )\r\n}\r\n\r\nexport default BasketItem\r\n","import { Box, Button, Container, Spinner, Text } from '@chakra-ui/react'\r\nimport React, { useEffect } from 'react'\r\nimport {\r\n  deleteAllBasketItems,\r\n  deleteBasketItem,\r\n  editBasketItem,\r\n  fetchBasket,\r\n} from 'store/basket/basket.action'\r\nimport { getBasketTotalAmount } from 'store/basket/basket.selector'\r\nimport { useAppDispatch, useAppSelector } from 'store/hooks'\r\nimport { addOrder } from 'store/order/order.action'\r\nimport BasketCreateOrder from './BasketCreateOrder'\r\nimport BasketItem from './BasketItem'\r\n\r\nconst Basket = () => {\r\n  const dispatch = useAppDispatch()\r\n  const { loading, items, totalAmount } = useAppSelector((state) => ({\r\n    items: state.basket.items,\r\n    totalAmount: getBasketTotalAmount(state),\r\n    loading: state.basket.loading,\r\n  }))\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchBasket())\r\n  }, [dispatch])\r\n\r\n  const changeAmountHandler = (itemId: number, value: number) => {\r\n    return dispatch(editBasketItem({ id: itemId, amount: value }))\r\n  }\r\n\r\n  const deleteBasketItemHandler = async (id: number) => {\r\n    await dispatch(deleteBasketItem(id))\r\n  }\r\n\r\n  const createOrder = async () => {\r\n    await dispatch(addOrder())\r\n  }\r\n\r\n  const deleteAllItemsHandler = () => {\r\n    return dispatch(deleteAllBasketItems())\r\n  }\r\n\r\n  return (\r\n    <Container maxW={'container.xl'}>\r\n      <Box className=\"flex justify-between items-center\">\r\n        <Text fontSize={'xl'} fontWeight=\"medium\" className=\"mt-2\">\r\n          Корзина\r\n        </Text>\r\n        <Button\r\n          onClick={deleteAllItemsHandler}\r\n          variant={'ghost'}\r\n          color=\"red.500\"\r\n          disabled={items.length === 0}\r\n        >\r\n          Удалить все\r\n        </Button>\r\n      </Box>\r\n      <Box className=\"flex gap-x-6 mt-6 items-start\">\r\n        <Box width={'70%'} className=\"shadow-lg p-4 rounded-lg\">\r\n          {loading && items.length === 0 && (\r\n            <Box className=\"text-center flex justify-center w-full\">\r\n              <Spinner width=\"100px\" height=\"100px\" color=\"blue.500\" speed=\"0.8s\" />\r\n            </Box>\r\n          )}\r\n          {items &&\r\n            items.map((item, index) => (\r\n              <BasketItem\r\n                key={`${item.id}_${index}`}\r\n                item={item}\r\n                changeAmountHandler={changeAmountHandler}\r\n                deleteBasketItemHandler={deleteBasketItemHandler}\r\n              />\r\n            ))}\r\n          {items && items.length === 0 && !loading && (\r\n            <Box className=\"mt-9 text-center\">\r\n              <Text fontSize={'xl'} fontWeight=\"bold\">\r\n                Корзина пуста\r\n              </Text>\r\n              <Text className=\"mt-2\" fontSize={'ml'}>\r\n                Воспользуйтесь каталогом или поиском\r\n              </Text>\r\n            </Box>\r\n          )}\r\n        </Box>\r\n        <Box className=\"shadow-lg p-4 rounded-lg sticky top-40\" width={'30%'}>\r\n          <Box className=\"flex justify-between items-center\">\r\n            <Text fontSize={'xl'}>Итого:</Text>\r\n            <Text fontSize={'2xl'} fontWeight=\"bold\">\r\n              {totalAmount} &#8381;\r\n            </Text>\r\n          </Box>\r\n          <BasketCreateOrder disabled={items.length === 0} createOrder={createOrder} />\r\n        </Box>\r\n      </Box>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default Basket\r\n"],"names":["BreadCrumbsTitles","DEFAULT_DETAIL_IMG","getBasketTotalAmount","createDraftSafeSelector","state","basket","items","res","forEach","item","detail","price","amount","createOrder","disabled","useState","loading","setLoading","clickHandler","className","colorScheme","isLoading","onClick","changeAmountHandler","deleteBasketItemHandler","id","style","maxWidth","src","img","alt","fontSize","title","shortDescription","fontWeight","variant","dispatch","useAppDispatch","useAppSelector","totalAmount","useEffect","fetchBasket","itemId","value","editBasketItem","deleteBasketItem","addOrder","maxW","deleteAllBasketItems","color","length","width","height","speed","map","index"],"sourceRoot":""}
"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[70],{3642:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var l=t(2791),i=t(8735),a=t(3822),s=t.p+"static/media/detail.7d3ce82f8153e1e5ade8.png",r=t(5861),c=t(885),o=t(7757),d=t.n(o),u=t(5798);var x=t(6478),f=t(184),m=function(){var e=(0,l.useState)(""),n=(0,c.Z)(e,2),t=n[0],a=n[1],s=function(e,n){var t=(0,l.useState)(e),i=(0,c.Z)(t,2),a=i[0],s=i[1];return(0,l.useEffect)((function(){var t=setTimeout((function(){s(e)}),n);return function(){clearTimeout(t)}}),[e]),a}(t,350);return(0,l.useEffect)((function(){var e=function(){var e=(0,r.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Z.get("/detail?search=".concat(s));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[s]),(0,f.jsxs)(i.xu,{children:[(0,f.jsx)(i.xv,{fontSize:"xl",children:"\u041f\u043e\u0438\u0441\u043a \u0437\u0430\u043a\u0430\u0437\u0430"}),(0,f.jsx)(u.BZ,{className:"mt-1",children:(0,f.jsx)(u.II,{value:t,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0430\u0437\u0430",onChange:function(e){return a(e.target.value)}})})]})},h=t(5790),j=t(2504),p=t(5277),v=t(6353),g=t(6579),N=function(e){var n=e.title,t=e.isParent,a=void 0!==t&&t,s=e.isEditModal,r=void 0!==s&&s,o=e.id,d=e.parentCategoryId,x=e.item,m=e.saveHandler,j=e.deleteHandler,p=e.editHandlerModal,v=(0,l.useState)(!1),g=(0,c.Z)(v,2),N=g[0],C=g[1],k=(0,l.useRef)(!1),w=(0,l.useState)(n),y=(0,c.Z)(w,2),b=y[0],I=y[1];(0,l.useEffect)((function(){""===n&&(C(!0),k.current=!0)}),[]);var H=function(e){if(a&&e.stopPropagation(),o)return j(o)},Z=function(e){a&&e.stopPropagation(),""!==b&&C(!N)},z=function(e){if(a&&e.stopPropagation(),""!==b)return C(!N),k.current?a?(m(null,{title:b}),k.current=!1):m(null,{title:b,parentCategoryId:d}):-1!==o?m(o,{title:b}):void 0};return a?(0,f.jsxs)(h.KF,{justifyContent:"space-between",cursor:"pointer",as:"div",children:[N&&(0,f.jsx)(u.II,{onKeyDown:function(e){return e.stopPropagation()},required:!0,className:"max-w-sm",value:b,onChange:function(e){return I(e.target.value)},onClick:function(e){return e.stopPropagation()}}),!N&&(0,f.jsx)(i.xv,{className:"py-2",children:b}),(0,f.jsxs)(i.xu,{children:[!N&&(0,f.jsx)("i",{className:"cursor-pointer text-chakra-blue-500 fa-solid fa-pen p-1 ",onClick:Z}),N&&(0,f.jsx)("i",{className:"fa-solid fa-check p-1 text-chakra-green-400 ml-4",style:{cursor:""===b?"not-allowed":"pointer"},onClick:z}),(0,f.jsx)("i",{className:"cursor-pointer text-chakra-red-500 fa-solid fa-trash-can p-1 ml-4",onClick:H}),(0,f.jsx)(h.XE,{className:"ml-2"})]})]}):(0,f.jsxs)(i.xu,{className:"p-3 flex justify-between items-center",children:[N&&(0,f.jsx)(u.II,{className:"max-w-sm",value:b,onChange:function(e){return I(e.target.value)}}),!N&&(0,f.jsx)(i.xv,{children:r?n:b}),(0,f.jsxs)(i.xu,{className:"flex gap-4",children:[!N&&(0,f.jsx)("i",{className:"cursor-pointer text-chakra-blue-500 fa-solid fa-pen p-1 ",onClick:r?p(x):Z}),N&&(0,f.jsx)("i",{className:"fa-solid fa-check p-1 text-chakra-green-400 ml-4",style:{cursor:""===b?"not-allowed":"pointer"},onClick:z}),(0,f.jsx)("i",{className:"cursor-pointer text-chakra-red-500 fa-solid fa-trash-can p-1",onClick:H})]})]})},C=function(e){var n,t,l=e.item,a=e.saveHandler,s=e.deleteHandler,r=e.addChildCategoryHandler;return(0,f.jsxs)(h.Qd,{children:[(0,f.jsx)(N,{id:null!==(n=l.id)&&void 0!==n?n:-1,saveHandler:a,isParent:!0,title:l.title,parentCategoryId:l.id,deleteHandler:s}),(0,f.jsxs)(h.Hk,{children:[!(null===l||void 0===l||null===(t=l.childCategories)||void 0===t||!t.length)&&l.childCategories.map((function(e,n){var t;return(0,f.jsx)(N,{deleteHandler:s,saveHandler:a,id:null!==(t=e.id)&&void 0!==t?t:-1,title:e.title,parentCategoryId:l.id},"".concat(e.id,"_").concat(n))})),(0,f.jsx)(i.xu,{textAlign:"right",children:(0,f.jsx)(j.zx,{color:"gray.600",className:"mr-4",variant:"ghost",onClick:function(){return r(l.id)},disabled:!l.title,children:(0,f.jsx)("i",{className:"fa-solid fa-plus"})})})]})]})},k=function(){var e=(0,g.C)((function(e){return e.category})),n=e.items,t=(0,g.T)();(0,l.useEffect)((function(){0===e.items.length&&t((0,p.Rk)())}),[]);var a=function(e){t((0,v.cq)(e))},s=function(e,n){return t(e?(0,p.hk)({body:n,id:e}):(0,p.l1)(n))},r=function(e){return t(e>0?(0,p.KU)(e):(0,v.uN)(e))};return(0,f.jsxs)(i.xu,{children:[(0,f.jsx)(i.xu,{className:"flex justify-between items-center",children:(0,f.jsx)(i.xv,{fontSize:"xl",children:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439"})}),(0,f.jsx)(h.UQ,{className:"mt-5",allowMultiple:!0,children:!!n.length&&n.map((function(e,n){return(0,f.jsx)(C,{item:e,saveHandler:s,deleteHandler:r,addChildCategoryHandler:a},"".concat(null===e||void 0===e?void 0:e.id,"_").concat(n))}))}),(0,f.jsx)(i.xu,{className:"text-right p-4",children:(0,f.jsx)(j.zx,{onClick:function(){t((0,v.cq)())},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]})},w=t(4942),y=t(1413),b=t(5223),I=t(4732),H=t(5033),Z=t(8581),z={title:"",model:"",newImg:null},S=function(){var e=(0,b.qY)(),n=e.isOpen,t=e.onOpen,a=e.onClose,s=(0,g.C)((function(e){return e.model})).items,o=(0,g.T)(),x=(0,l.useState)(z),m=(0,c.Z)(x,2),p=m[0],v=m[1];(0,l.useEffect)((function(){0===s.length&&o((0,H.rq)())}),[]);var C=function(e,n){"newImg"===e&&n[0]&&(n=URL.createObjectURL(n[0])),v((function(t){return(0,y.Z)((0,y.Z)({},t),{},(0,w.Z)({},e,n))}))},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,n=arguments.length>1?arguments[1]:void 0;return function(){v(n?(0,y.Z)((0,y.Z)({},e),{},{brandId:n}):e),t()}},S=function(){a(),v(z)},E=function(){var e=arguments.length>1?arguments[1]:void 0;o((0,H.mS)(e))},P=function(e,n){o((0,H.E$)({id:e,body:n}))},M=function(){var e=(0,r.Z)(d().mark((function e(){var n,t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new FormData,!p.newImg){e.next=6;break}return e.next=4,fetch(p.newImg).then((function(e){return e.blob()}));case 4:t=e.sent,n.append("img",t);case 6:n.append("title",null===p||void 0===p?void 0:p.title),n.append("model",null===p||void 0===p?void 0:p.model),n.append("brandId",null===p||void 0===p?void 0:p.brandId),null!==p&&void 0!==p&&p.id?o((0,H.E$)({id:p.id,body:n})):o((0,H.mS)(n)),S();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e){o((0,H.$s)(e))};return(0,f.jsxs)(i.xu,{children:[(0,f.jsx)(i.xu,{className:"flex items-center justify-between",children:(0,f.jsx)(i.xv,{fontSize:"xl",children:"\u041c\u0430\u0440\u043a\u0438 \u043c\u0430\u0448\u0438\u043d"})}),(0,f.jsx)(h.UQ,{className:"mt-5",allowMultiple:!0,children:s&&s.map((function(e,n){var t;return(0,f.jsxs)(h.Qd,{children:[(0,f.jsx)(N,{deleteHandler:O,id:e.id,saveHandler:e.id<0?E:P,title:e.title,isParent:!0}),(0,f.jsxs)(h.Hk,{children:[!(null===e||void 0===e||null===(t=e.brandModels)||void 0===t||!t.length)&&e.brandModels.map((function(n,t){var l;return(0,f.jsx)(N,{item:n,deleteHandler:O,saveHandler:E,id:null!==(l=n.id)&&void 0!==l?l:-1,title:n.title,parentCategoryId:e.id,editHandlerModal:k,isEditModal:!0},"".concat(n.id,"_").concat(t))})),(0,f.jsx)(i.xu,{textAlign:"right",children:(0,f.jsx)(j.zx,{color:"gray.600",className:"mr-4",variant:"ghost",onClick:k(void 0,e.id),disabled:!e.title,children:(0,f.jsx)("i",{className:"fa-solid fa-plus"})})})]})]},"".concat(e.id,"_").concat(n))}))}),(0,f.jsx)(i.xu,{className:"text-right p-4",children:(0,f.jsx)(j.zx,{onClick:function(){return o((0,Z.Y2)())},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})}),(0,f.jsxs)(I.u_,{isOpen:n,onClose:S,isCentered:!0,children:[(0,f.jsx)(I.ZA,{}),(0,f.jsxs)(I.hz,{children:[(0,f.jsx)(I.xB,{children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u043e\u0434\u0435\u043b\u044c"}),(0,f.jsx)(I.ol,{}),(0,f.jsxs)(I.fe,{children:[(0,f.jsx)(i.xv,{children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),(0,f.jsx)(u.II,{value:p.title,onChange:function(e){return C("title",e.target.value)}}),(0,f.jsx)(i.xv,{children:"\u041c\u043e\u0434\u0435\u043b\u044c"}),(0,f.jsx)(u.II,{className:"mt-2",placeholder:"\u041c\u043e\u0434\u0435\u043b\u044c",value:p.model,onChange:function(e){return C("model",e.target.value)}}),(0,f.jsxs)(i.xu,{children:[(0,f.jsx)(i.xv,{className:"mt-2",children:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),(0,f.jsx)("label",{className:"cursor-pointer mt-3 p-4 flex justify-center items-center border-2 border-dashed",htmlFor:"uploadFile",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),(0,f.jsx)("input",{className:"overflow-hidden w-0 h-0 opacity-0 absolute",type:"file",name:"uploadFile",id:"uploadFile",onChange:function(e){var n;return C("newImg",null!==(n=e.target.files)&&void 0!==n?n:"")}})]}),(0,f.jsx)(i.xu,{className:"mt-2 flex justify-center",children:(0,f.jsx)("img",{className:"max-w-full",src:p.newImg?p.newImg:p.img?p.img:"",alt:""})})]}),(0,f.jsxs)(I.mz,{children:[(0,f.jsx)(j.zx,{variant:"ghost",mr:3,onClick:S,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),(0,f.jsx)(j.zx,{colorScheme:"blue",onClick:M,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})]})]})},E=function(){return(0,f.jsx)(i.xu,{children:(0,f.jsx)(i.xv,{fontSize:"xl",children:"\u0414\u0435\u0442\u0430\u043b\u0438"})})},P=function(){return(0,f.jsxs)(i.W2,{maxW:"container.xl",children:[(0,f.jsx)(i.xv,{className:"sticky top-36 left-4",fontSize:"1xl",fontWeight:"bold",children:"\u0410\u0434\u043c\u0438\u043d-\u043f\u0430\u043d\u0435\u043b\u044c"}),(0,f.jsx)(a.mQ,{children:(0,f.jsxs)(i.kC,{className:"mt-4 w-full",justifyContent:"space-between",children:[(0,f.jsx)(i.xu,{className:"w-full max-w-xs sticky top-44 left-4",borderWidth:"1px",borderRadius:"lg",flexGrow:0,height:"max-content",children:(0,f.jsxs)(a.td,{flexDirection:"column",borderBottom:"none",children:[(0,f.jsxs)(a.OK,{className:"py-3",children:[(0,f.jsx)("i",{className:"fa-solid fa-clipboard-list mr-2"}),"\u0417\u0430\u043a\u0430\u0437\u044b"]}),(0,f.jsxs)(a.OK,{className:"py-3",children:[(0,f.jsx)("i",{className:"fa-solid fa-list mr-2"}),"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"]}),(0,f.jsxs)(a.OK,{className:"py-3",children:[(0,f.jsx)("i",{className:"fa-solid fa-car mr-2"}),"\u041c\u043e\u0434\u0435\u043b\u0438"]}),(0,f.jsxs)(a.OK,{className:"py-3",children:[(0,f.jsx)("img",{className:"w-4 h-4 mr-2",src:s,alt:""}),"\u0414\u0435\u0442\u0430\u043b\u0438"]})]})}),(0,f.jsx)(i.xu,{className:"flex-auto ml-7",children:(0,f.jsxs)(a.nP,{children:[(0,f.jsx)(a.x4,{className:"p-0",children:(0,f.jsx)(m,{})}),(0,f.jsx)(a.x4,{className:"p-0",children:(0,f.jsx)(k,{})}),(0,f.jsx)(a.x4,{className:"p-0",children:(0,f.jsx)(S,{})}),(0,f.jsx)(a.x4,{className:"p-0",children:(0,f.jsx)(E,{})})]})})]})})]})}}}]);
//# sourceMappingURL=70.3f5158d1.chunk.js.map
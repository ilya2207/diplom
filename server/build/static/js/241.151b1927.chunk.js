"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[241],{3763:function(e,n,t){var r;t.d(n,{ne:function(){return r},uz:function(){return i}}),function(e){e.MAIN="\u0413\u043b\u0430\u0432\u043d\u0430\u044f",e.MODEL="\u041c\u043e\u0434\u0435\u043b\u044c \u0430\u0432\u0442\u043e",e.CATEGORY="\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439",e.LIST="\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0435\u0439"}(r||(r={}));var i="/images/detail/default.jpg"},1241:function(e,n,t){t.r(n),t.d(n,{default:function(){return w}});var r=t(5861),i=t(7757),s=t.n(i),l=t(8735),c=t(2504),a=t(2213),u=t(2791),o=t(5719),d=(0,t(1986).Yh)((function(e){return e.basket}),(function(e){var n=e.items,t=0;return n.forEach((function(e){var n,r;t+=(null!==(n=null===(r=e.detail)||void 0===r?void 0:r.price)&&void 0!==n?n:0)*e.amount})),t})),x=t(6579),f=t(3842),m=t(885),h=t(184),v=function(e){var n=e.createOrder,t=e.disabled,i=(0,u.useState)(!1),a=(0,m.Z)(i,2),o=a[0],d=a[1],x=function(){var e=(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,n();case 3:d(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,h.jsx)(l.xu,{children:(0,h.jsx)(c.zx,{className:"w-full mt-6",disabled:t,colorScheme:"blue",isLoading:o,onClick:x,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})},j=t(5272),p=t(3763),g=function(e){var n,t,i,a,o,d=e.changeAmountHandler,x=e.deleteBasketItemHandler,f=e.item,v=(0,u.useState)(!1),g=(0,m.Z)(v,2),w=g[0],N=g[1],b=function(){var e=(0,r.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.next=3,x(null!==(n=f.id)&&void 0!==n?n:0);case 3:N(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,h.jsx)(l.xu,{className:"p-2 mt-2",children:(0,h.jsxs)(l.xu,{className:"flex items-start",children:[(0,h.jsx)(l.xu,{children:(0,h.jsx)("img",{className:"w-full",style:{maxWidth:"150px"},src:null!==(n=null===(t=f.detail)||void 0===t?void 0:t.img)&&void 0!==n?n:p.uz,alt:""})}),(0,h.jsxs)(l.xu,{className:"w-full ml-6",children:[(0,h.jsxs)(l.xu,{className:"flex justify-between items-center w-full",children:[(0,h.jsxs)(l.xu,{children:[(0,h.jsx)(l.xv,{fontSize:"md",children:null===(i=f.detail)||void 0===i?void 0:i.title}),(0,h.jsx)(l.xv,{fontSize:"md",children:null===(a=f.detail)||void 0===a?void 0:a.shortDescription})]}),(0,h.jsx)(l.xu,{children:(0,h.jsxs)(l.xv,{fontSize:"lg",fontWeight:"medium",children:[null===(o=f.detail)||void 0===o?void 0:o.price,"\u20bd"]})})]}),(0,h.jsxs)(l.xu,{className:"mt-3 flex justify-between items-center",children:[(0,h.jsxs)(l.xu,{className:"rounded-xl items-center inline-flex px-4 gap-2",children:[(0,h.jsx)(c.zx,{variant:"ghost",disabled:1===f.amount,onClick:function(){var e;return d(null!==(e=f.id)&&void 0!==e?e:0,f.amount-1)},children:(0,h.jsx)(j.V_,{className:"cursor-pointer"})}),(0,h.jsx)(l.xv,{className:"select-none",fontWeight:"medium",fontSize:"xl",children:f.amount}),(0,h.jsx)(c.zx,{variant:"ghost",onClick:function(){var e;return d(null!==(e=f.id)&&void 0!==e?e:0,f.amount+1)},children:(0,h.jsx)(j.dt,{className:"cursor-pointer"})})]}),(0,h.jsx)(c.zx,{onClick:b,colorScheme:"red",isLoading:w,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})]})})},w=function(){var e=(0,x.T)(),n=(0,x.C)((function(e){return{items:e.basket.items,totalAmount:d(e),loading:e.basket.loading}})),t=n.loading,i=n.items,m=n.totalAmount;(0,u.useEffect)((function(){e((0,o.br)())}),[e]);var j=function(n,t){return e((0,o.$v)({id:n,amount:t}))},p=function(){var n=(0,r.Z)(s().mark((function n(t){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e((0,o.c)(t));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),w=function(){var n=(0,r.Z)(s().mark((function n(){return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e((0,f.fS)());case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,h.jsxs)(l.W2,{maxW:"container.xl",children:[(0,h.jsxs)(l.xu,{className:"flex justify-between items-center",children:[(0,h.jsx)(l.xv,{fontSize:"xl",fontWeight:"medium",className:"mt-2",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),(0,h.jsx)(c.zx,{onClick:function(){return e((0,o.yB)())},variant:"ghost",color:"red.500",disabled:0===i.length,children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435"})]}),(0,h.jsxs)(l.xu,{className:"flex gap-x-6 mt-6 items-start",children:[(0,h.jsxs)(l.xu,{width:"70%",className:"shadow-lg p-4 rounded-lg",children:[t&&0===i.length&&(0,h.jsx)(l.xu,{className:"text-center flex justify-center w-full",children:(0,h.jsx)(a.$,{width:"100px",height:"100px",color:"blue.500",speed:"0.8s"})}),i&&i.map((function(e,n){return(0,h.jsx)(g,{item:e,changeAmountHandler:j,deleteBasketItemHandler:p},"".concat(e.id,"_").concat(n))})),i&&0===i.length&&!t&&(0,h.jsxs)(l.xu,{className:"mt-9 text-center",children:[(0,h.jsx)(l.xv,{fontSize:"xl",fontWeight:"bold",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"}),(0,h.jsx)(l.xv,{className:"mt-2",fontSize:"ml",children:"\u0412\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435\u0441\u044c \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u043e\u043c \u0438\u043b\u0438 \u043f\u043e\u0438\u0441\u043a\u043e\u043c"})]})]}),(0,h.jsxs)(l.xu,{className:"shadow-lg p-4 rounded-lg sticky top-40",width:"30%",children:[(0,h.jsxs)(l.xu,{className:"flex justify-between items-center",children:[(0,h.jsx)(l.xv,{fontSize:"xl",children:"\u0418\u0442\u043e\u0433\u043e:"}),(0,h.jsxs)(l.xv,{fontSize:"2xl",fontWeight:"bold",children:[m," \u20bd"]})]}),(0,h.jsx)(v,{disabled:0===i.length,createOrder:w})]})]})]})}}}]);
//# sourceMappingURL=241.151b1927.chunk.js.map